version: "3.9"

services:
  api:
    build: .
    env_file: .env
    environment:
      DB_DRIVER: "${DB_DRIVER:-ODBC Driver 18 for SQL Server}"
      DB_SERVER: "${DB_SERVER:-db}"
      DB_PORT: "${DB_PORT:-1433}"
      DB_NAME: "${DB_NAME:-accura_db}"
      DB_USER: "${DB_USER:-sa}"
      DB_PASSWORD: "${DB_PASSWORD:-YourStrong!Passw0rd}"
    ports:
      - "8000:8000"
    depends_on:
      - db

  db:
    image: mcr.microsoft.com/mssql/server:2022-latest
    environment:
      ACCEPT_EULA: "Y"
      MSSQL_PID: "Developer"
      SA_PASSWORD: "${DB_PASSWORD:-YourStrong!Passw0rd}"
    ports:
      - "1433:1433"
    volumes:
      - mssql_data:/var/opt/mssql

volumes:
  mssql_data:
